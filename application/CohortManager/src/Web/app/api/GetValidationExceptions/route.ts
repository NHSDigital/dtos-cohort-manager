import { NextResponse } from "next/server";
import { ExceptionAPIDetails } from "@/app/types/exceptionsApi";

export async function GET(request: Request) {
  const { searchParams } = new URL(request.url);
  const exceptionId = searchParams.get("exceptionId");
  const raisedOnly = searchParams.get("raisedOnly");
  const notRaisedOnly = searchParams.get("notRaisedOnly");

  if (exceptionId) {
    const exception: ExceptionAPIDetails = {
      ExceptionId: 2063,
      FileName:
        "202411261720028838554_1B8F53_-_CAAS_BREAST_SCREENING_COHORT.parquet",
      NhsNumber: "1211111881",
      DateCreated: "2025-05-16T14:26:09.28",
      DateResolved: "9999-12-31T00:00:00",
      RuleId: -2146233088,
      RuleDescription:
        "There was problem posting the participant to the database",
      ErrorRecord:
        '{"RecordType":"ADD","NhsNumber":"1211111881","RemovalReason":"","RemovalEffectiveFromDate":"","ScreeningId":"1","ScreeningName":"Breast Screening","EligibilityFlag":"1"}',
      Category: 5,
      ScreeningName: "Breast Screening",
      ExceptionDate: "2025-01-15T00:00:00",
      CohortName: "",
      Fatal: 1,
      ExceptionDetails: {
        GivenName: "NewTest 1",
        FamilyName: "Adani 1",
        DateOfBirth: "19700101",
        ParticipantAddressLine1: "241 SpaightSpaightSpTeeeeeeest Road",
        ParticipantAddressLine2: "Eastbourne",
        ParticipantAddressLine3: "TestAddress",
        ParticipantAddressLine4: "Chelmsford",
        ParticipantAddressLine5: "United Kingdom",
        ParticipantPostCode: "AB43 8FJ",
        TelephoneNumberHome: "01619999999",
        EmailAddressHome: "bturneux0@soup.io",
        PrimaryCareProvider: "E85121",
        Gender: 1,
      },
      ServiceNowId: "",
      ServiceNowCreatedDate: "",
      RecordUpdatedDate: "2025-01-17T09:27:18.25",
    };
    return NextResponse.json(exception, { status: 200 });
  }

  if (notRaisedOnly) {
    const exceptions = {
      Items: [
        {
          ExceptionId: 2073,
          FileName:
            "202411261720028838554_1B8F53_-_CAAS_BREAST_SCREENING_COHORT.parquet",
          NhsNumber: "1211111881",
          DateCreated: "2025-05-16T14:26:09.28",
          DateResolved: "9999-12-31T00:00:00",
          RuleId: -2146233088,
          RuleDescription:
            "There was problem posting the participant to the database",
          ErrorRecord:
            '{"RecordType":"ADD","NhsNumber":"1211111881","RemovalReason":"","RemovalEffectiveFromDate":"","ScreeningId":"1","ScreeningName":"Breast Screening","EligibilityFlag":"1"}',
          Category: 5,
          ScreeningName: "Breast Screening",
          ExceptionDate: "2025-01-15T00:00:00",
          CohortName: "",
          Fatal: 1,
          ExceptionDetails: {
            GivenName: "NewTest 2",
            FamilyName: "Adani 2",
            DateOfBirth: "19700101",
            ParticipantAddressLine1: "241 SpaightSpaightSpTeeeeeeest Road",
            ParticipantAddressLine2: "Eastbourne",
            ParticipantAddressLine3: "TestAddress",
            ParticipantAddressLine4: "Chelmsford",
            ParticipantAddressLine5: "United Kingdom",
            ParticipantPostCode: "AB43 8FJ",
            TelephoneNumberHome: "01619999999",
            EmailAddressHome: "bturneux0@soup.io",
            PrimaryCareProvider: "E85121",
            Gender: 1,
          },
          ServiceNowId: "",
          ServiceNowCreatedDate: "",
          RecordUpdatedDate: "2025-01-17T09:27:18.25",
        },
        {
          ExceptionId: 2074,
          FileName:
            "202411261720028838554_1B8F53_-_CAAS_BREAST_SCREENING_COHORT.parquet",
          NhsNumber: "1211111882",
          DateCreated: "2025-05-17T10:00:00.00",
          DateResolved: "9999-12-31T00:00:00",
          RuleId: -2146233089,
          RuleDescription:
            "Another error posting the participant to the database",
          ErrorRecord:
            '{"RecordType":"ADD","NhsNumber":"1211111882","RemovalReason":"","RemovalEffectiveFromDate":"","ScreeningId":"1","ScreeningName":"Breast Screening","EligibilityFlag":"1"}',
          Category: 5,
          ScreeningName: "Breast Screening",
          ExceptionDate: "2025-01-16T00:00:00",
          CohortName: "",
          Fatal: 1,
          ExceptionDetails: {
            GivenName: "NewTest 3",
            FamilyName: "Adani 3",
            DateOfBirth: "19700102",
            ParticipantAddressLine1: "242 SpaightSpaightSpTeeeeeeest Road",
            ParticipantAddressLine2: "Eastbourne",
            ParticipantAddressLine3: "TestAddress",
            ParticipantAddressLine4: "Chelmsford",
            ParticipantAddressLine5: "United Kingdom",
            ParticipantPostCode: "AB43 8FJ",
            TelephoneNumberHome: "01619999998",
            EmailAddressHome: "bturneux1@soup.io",
            PrimaryCareProvider: "E85122",
            Gender: 1,
          },
          ServiceNowId: "",
          ServiceNowCreatedDate: "",
          RecordUpdatedDate: "2025-01-18T09:27:18.25",
        },
      ],
      IsFirstPage: true,
      HasNextPage: false,
      LastResultId: 2063,
      TotalItems: 2,
      TotalPages: 1,
      CurrentPage: 1,
    };
    return NextResponse.json(exceptions, { status: 200 });
  }

  if (raisedOnly) {
    const exceptions = {
      Items: [
        {
          ExceptionId: 2073,
          FileName:
            "202411261720028838554_1B8F53_-_CAAS_BREAST_SCREENING_COHORT.parquet",
          NhsNumber: "1211111881",
          DateCreated: "2025-05-16T14:26:09.28",
          DateResolved: "9999-12-31T00:00:00",
          RuleId: -2146233088,
          RuleDescription:
            "There was problem posting the participant to the database",
          ErrorRecord:
            '{"RecordType":"ADD","NhsNumber":"1211111881","RemovalReason":"","RemovalEffectiveFromDate":"","ScreeningId":"1","ScreeningName":"Breast Screening","EligibilityFlag":"1"}',
          Category: 5,
          ScreeningName: "Breast Screening",
          ExceptionDate: "2025-01-15T00:00:00",
          CohortName: "",
          Fatal: 1,
          ExceptionDetails: {
            GivenName: "NewTest 2",
            FamilyName: "Adani 2",
            DateOfBirth: "19700101",
            ParticipantAddressLine1: "241 SpaightSpaightSpTeeeeeeest Road",
            ParticipantAddressLine2: "Eastbourne",
            ParticipantAddressLine3: "TestAddress",
            ParticipantAddressLine4: "Chelmsford",
            ParticipantAddressLine5: "United Kingdom",
            ParticipantPostCode: "AB43 8FJ",
            TelephoneNumberHome: "01619999999",
            EmailAddressHome: "bturneux0@soup.io",
            PrimaryCareProvider: "E85121",
            Gender: 1,
          },
          ServiceNowId: "INC0002765",
          ServiceNowCreatedDate: "2025-06-16T00:00:00",
          RecordUpdatedDate: "2025-01-17T09:27:18.25",
        },
      ],
      IsFirstPage: true,
      HasNextPage: false,
      LastResultId: 2063,
      TotalItems: 1,
      TotalPages: 1,
      CurrentPage: 1,
    };
    return NextResponse.json(exceptions, { status: 200 });
  }

  const exceptions = {
    Items: [
      {
        ExceptionId: 2063,
        FileName:
          "202411261720028838554_1B8F53_-_CAAS_BREAST_SCREENING_COHORT.parquet",
        NhsNumber: "1211111881",
        DateCreated: "2025-05-16T14:26:09.28",
        DateResolved: "9999-12-31T00:00:00",
        RuleId: -2146233088,
        RuleDescription:
          "There was problem posting the participant to the database",
        ErrorRecord:
          '{"RecordType":"ADD","NhsNumber":"1211111881","RemovalReason":"","RemovalEffectiveFromDate":"","ScreeningId":"1","ScreeningName":"Breast Screening","EligibilityFlag":"1"}',
        Category: 5,
        ScreeningName: "Breast Screening",
        ExceptionDate: "2025-01-15T00:00:00",
        CohortName: "",
        Fatal: 1,
        ServiceNowId: "",
        ServiceNowCreatedDate: "",
        RecordUpdatedDate: "2025-01-17T09:27:18.25",
      },
      {
        ExceptionId: 2073,
        FileName:
          "202411261720028838554_1B8F53_-_CAAS_BREAST_SCREENING_COHORT.parquet",
        NhsNumber: "1211111881",
        DateCreated: "2025-05-16T14:26:09.28",
        DateResolved: "9999-12-31T00:00:00",
        RuleId: -2146233088,
        RuleDescription:
          "There was problem posting the participant to the database",
        ErrorRecord:
          '{"RecordType":"ADD","NhsNumber":"1211111881","RemovalReason":"","RemovalEffectiveFromDate":"","ScreeningId":"1","ScreeningName":"Breast Screening","EligibilityFlag":"1"}',
        Category: 5,
        ScreeningName: "Breast Screening",
        ExceptionDate: "2025-01-15T00:00:00",
        CohortName: "",
        Fatal: 1,
        ServiceNowId: "INC0002765",
        ServiceNowCreatedDate: "2025-06-16T00:00:00",
        RecordUpdatedDate: "2025-01-17T09:27:18.25",
      },
      {
        ExceptionId: 2064,
        FileName: "ADD_500_2_-_CAAS_BREAST_SCREENING_COHORT.parquet",
        NhsNumber: "9732367741",
        DateCreated: "2025-01-07T15:15:03.583",
        DateResolved: "2025-01-07T00:00:00",
        RuleId: -2147467261,
        RuleDescription: "The operation has timed out.",
        ErrorRecord:
          '{"RecordType":"ADD","NhsNumber":"9732367741","RemovalReason":"","RemovalEffectiveFromDate":"","ScreeningId":"1","ScreeningName":"Breast Screening","EligibilityFlag":"1"}',
        Category: 5,
        ScreeningName: "Breast Screening",
        ExceptionDate: "2025-01-07T00:00:00",
        CohortName: "",
        Fatal: 1,
        ExceptionDetails: null,
        ServiceNowId: "",
        ServiceNowCreatedDate: "",
        RecordUpdatedDate: "2025-01-17T09:27:18.25",
      },
      {
        ExceptionId: 2065,
        FileName: "ADD_500_2_-_CAAS_BREAST_SCREENING_COHORT.parquet",
        NhsNumber: "9732368012",
        DateCreated: "2025-01-07T15:15:04.603",
        DateResolved: "2025-01-07T00:00:00",
        RuleId: -2147467261,
        RuleDescription: "CurrentPostingAndPrimaryProvider",
        ErrorRecord:
          '{"RecordType":"ADD","NhsNumber":"9732368012","RemovalReason":"","RemovalEffectiveFromDate":"","ScreeningId":"1","ScreeningName":"Breast Screening","EligibilityFlag":"1"}',
        Category: 5,
        ScreeningName: "Breast Screening",
        ExceptionDate: "2025-01-07T00:00:00",
        CohortName: "",
        Fatal: 1,
        ExceptionDetails: null,
        ServiceNowId: "",
        ServiceNowCreatedDate: "",
        RecordUpdatedDate: "2025-01-17T09:27:18.25",
      },
      {
        ExceptionId: 2066,
        FileName: "ADD_500_2_-_CAAS_BREAST_SCREENING_COHORT.parquet",
        NhsNumber: "9453624764",
        DateCreated: "2025-01-07T15:15:04.937",
        DateResolved: "2025-01-07T00:00:00",
        RuleId: -2147467261,
        RuleDescription: "Missing or invalid Posting",
        ErrorRecord:
          '{"RecordType":"ADD","NhsNumber":"9453624764","RemovalReason":"","RemovalEffectiveFromDate":"","ScreeningId":"1","ScreeningName":"Breast Screening","EligibilityFlag":"1"}',
        Category: 5,
        ScreeningName: "Breast Screening",
        ExceptionDate: "2025-01-07T00:00:00",
        CohortName: "",
        Fatal: 1,
        ExceptionDetails: null,
        ServiceNowId: "",
        ServiceNowCreatedDate: "",
        RecordUpdatedDate: "2025-01-17T09:27:18.25",
      },
      {
        ExceptionId: 2067,
        FileName: "ADD_500_2_-_CAAS_BREAST_SCREENING_COHORT.parquet",
        NhsNumber: "9430146556",
        DateCreated: "2025-01-07T15:15:05.007",
        DateResolved: "2025-01-07T00:00:00",
        RuleId: -2147467261,
        RuleDescription: "Invalid primary care provider GP practice code",
        ErrorRecord:
          '{"RecordType":"ADD","NhsNumber":"9430146556","RemovalReason":"","RemovalEffectiveFromDate":"","ScreeningId":"1","ScreeningName":"Breast Screening","EligibilityFlag":"1"}',
        Category: 5,
        ScreeningName: "Breast Screening",
        ExceptionDate: "2025-01-07T00:00:00",
        CohortName: "",
        Fatal: 1,
        ExceptionDetails: null,
        ServiceNowId: "",
        ServiceNowCreatedDate: "",
        RecordUpdatedDate: "2025-01-17T09:27:18.25",
      },
      {
        ExceptionId: 2068,
        FileName: "ADD_500_2_-_CAAS_BREAST_SCREENING_COHORT.parquet",
        NhsNumber: "9454528831",
        DateCreated: "2025-01-07T15:15:05.143",
        DateResolved: "2025-01-07T00:00:00",
        RuleId: -2147467261,
        RuleDescription:
          "Object reference not set to an instance of an object.",
        ErrorRecord:
          '{"RecordType":"ADD","NhsNumber":"9454528831","RemovalReason":"","RemovalEffectiveFromDate":"","ScreeningId":"1","ScreeningName":"Breast Screening","EligibilityFlag":"1"}',
        Category: 5,
        ScreeningName: "Breast Screening",
        ExceptionDate: "2025-01-07T00:00:00",
        CohortName: "",
        Fatal: 1,
        ExceptionDetails: null,
        ServiceNowId: "",
        ServiceNowCreatedDate: "",
        RecordUpdatedDate: "2025-01-17T09:27:18.25",
      },
      {
        ExceptionId: 2069,
        FileName: "ADD_500_2_-_CAAS_BREAST_SCREENING_COHORT.parquet",
        NhsNumber: "9732367725",
        DateCreated: "2025-01-07T15:15:05.167",
        DateResolved: "2025-01-07T00:00:00",
        RuleId: -2147467261,
        RuleDescription: "The operation has timed out.",
        ErrorRecord:
          '{"RecordType":"ADD","NhsNumber":"9732367725","RemovalReason":"","RemovalEffectiveFromDate":"","ScreeningId":"1","ScreeningName":"Breast Screening","EligibilityFlag":"1"}',
        Category: 5,
        ScreeningName: "Breast Screening",
        ExceptionDate: "2025-01-07T00:00:00",
        CohortName: "",
        Fatal: 1,
        ExceptionDetails: null,
        ServiceNowId: "",
        ServiceNowCreatedDate: "",
        RecordUpdatedDate: "2025-01-17T09:27:18.25",
      },
      {
        ExceptionId: 2070,
        FileName: "ADD_500_2_-_CAAS_BREAST_SCREENING_COHORT.parquet",
        NhsNumber: "9454616900",
        DateCreated: "2025-01-07T15:15:05.22",
        DateResolved: "2025-01-07T00:00:00",
        RuleId: -2147467261,
        RuleDescription: "CurrentPostingAndPrimaryProvider",
        ErrorRecord:
          '{"RecordType":"ADD","NhsNumber":"9454616900","RemovalReason":"","RemovalEffectiveFromDate":"","ScreeningId":"1","ScreeningName":"Breast Screening","EligibilityFlag":"1"}',
        Category: 5,
        ScreeningName: "Breast Screening",
        ExceptionDate: "2025-01-07T00:00:00",
        CohortName: "",
        Fatal: 1,
        ExceptionDetails: null,
        ServiceNowId: "",
        ServiceNowCreatedDate: "",
        RecordUpdatedDate: "2025-01-17T09:27:18.25",
      },
      {
        ExceptionId: 2071,
        FileName: "ADD_500_2_-_CAAS_BREAST_SCREENING_COHORT.parquet",
        NhsNumber: "9650245286",
        DateCreated: "2025-01-07T15:15:05.407",
        DateResolved: "2025-01-07T00:00:00",
        RuleId: -2147467261,
        RuleDescription: "Missing or invalid Posting.",
        ErrorRecord:
          '{"RecordType":"ADD","NhsNumber":"9650245286","RemovalReason":"","RemovalEffectiveFromDate":"","ScreeningId":"1","ScreeningName":"Breast Screening","EligibilityFlag":"1"}',
        Category: 5,
        ScreeningName: "Breast Screening",
        ExceptionDate: "2025-01-07T00:00:00",
        CohortName: "",
        Fatal: 1,
        ExceptionDetails: null,
        ServiceNowId: "",
        ServiceNowCreatedDate: "",
        RecordUpdatedDate: "2025-01-17T09:27:18.25",
      },
    ],
    IsFirstPage: true,
    HasNextPage: false,
    LastResultId: 4394,
    TotalItems: 10,
    TotalPages: 1,
    CurrentPage: 1,
  };

  return NextResponse.json(exceptions, { status: 200 });
}
