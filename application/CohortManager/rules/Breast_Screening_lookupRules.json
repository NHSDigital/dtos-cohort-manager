[
  {
    "WorkflowName": "Common",
    "Rules":
        [
            {
                "RuleName": "36.ValidatePrimaryCareProvider.NonFatal",
                "Expression": "dbLookup.ValidatePrimaryCareProvider(newParticipant.PrimaryCareProvider)",
                "Actions": {
                    "OnFailure": {
                        "Name": "OutputExpression",
                        "Context": {
                            "Expression": "\"Invalid primary care provider GP practice code\""
                        }
                    }
                }
            }
        ]
    },
    {
      "WorkflowName": "ADD",
      "Rules":
          [
              {
                  "RuleName": "47.ParticipantMustNotExist.Fatal",
                  "Expression": "string.IsNullOrWhiteSpace(existingParticipant.NhsNumber)"
              }
          ]
    },
    {
      "WorkflowName": "AMENDED",
      "Rules":
          [
              {
                  "RuleName": "22.ParticipantMustExist.Fatal",
                  "Expression": "!string.IsNullOrWhiteSpace(existingParticipant.NhsNumber)"
              },
              {
                  "RuleName": "35.Demographics.NonFatal",
                  "Expression": "(newParticipant.Surname == existingParticipant.Surname AND newParticipant.Gender == existingParticipant.Gender) OR (newParticipant.Surname == existingParticipant.Surname AND newParticipant.DateOfBirth == existingParticipant.DateOfBirth) OR (newParticipant.Gender == existingParticipant.Gender AND newParticipant.DateOfBirth == existingParticipant.DateOfBirth)"
              }
          ]
    },
    {
      "WorkflowName": "REMOVED",
      "Rules":
          [
              {
                  "RuleName": "22.ParticipantMustExist.Fatal",
                  "Expression": "!string.IsNullOrWhiteSpace(existingParticipant.NhsNumber)"
              }
          ]
    }
]
